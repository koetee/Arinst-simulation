# Arinst-simulation

Данный проект представляет собой симуляцию обработки данных устройства, которое является частью системы радиочастотного сканирования. Проект демонстрирует, как можно реализовать обработку и кодирование данных устройства на C#.

## Обзор

Проект состоит из нескольких ключевых компонентов:

1. `DeviceProcessor`: Обрабатывает данные устройства, нормализует сообщения и вычисляет амплитуду сигнала.
2. `Scanner`: Симулирует сканирование частотного диапазона и генерирует данные об амплитуде.
3. `SignalGenerator`: Генерирует синтетический сигнал на основе заданной частоты.

## Алгоритм

### Инициализация

Программа начинается с инициализации `DeviceProcessor` и `Scanner` с определенными параметрами:

```csharp
DeviceProcessor device = new DeviceProcessor("-1 -1 1800000000 1000000 10700000 0");
Scanner ComPort1 = new Scanner("scn20 1800000000 1900000000 1000000 200 20 107000000 8500 8");
```

### Сканирование

`Scanner` симулирует сканирование частотного диапазона:

1. Вычисляется количество точек сканирования на основе начальной и конечной частоты и шага.
2. Генерируется синтетический сигнал с помощью `SignalGenerator`.
3. Данные кодируются в последовательность байтов.

### Обработка данных

`DeviceProcessor` обрабатывает данные, полученные от сканера:

1. Нормализует входное сообщение, извлекая индекс, закодированные данные, время выполнения и статус.
2. Обрабатывает закодированные данные, вычисляя частоту и амплитуду для каждой точки.

### Расчет амплитуды

Амплитуда вычисляется по формуле:

```csharp
double amplitude = (((BASE_AMPLITUDE_CALCULATION_LEVEL * AMPLITUDE_ACCURACY_COEFFICIENT) - amplitudeIntValue) / (double)AMPLITUDE_ACCURACY_COEFFICIENT) - _attenuation;
```

где:
- `BASE_AMPLITUDE_CALCULATION_LEVEL` = 80
- `AMPLITUDE_ACCURACY_COEFFICIENT` = 10
- `amplitudeIntValue` извлекается из закодированных данных
- `_attenuation` - это значение затухания, заданное при инициализации

## Примечания

- Проект использует синтетическую генерацию сигнала для симуляции данных устройства.
- Расчеты частоты и амплитуды основаны на предопределенных константах и могут потребовать настройки для конкретных применений.

## Источники
[Документация](https://github.com/koetee/Arinst-simulation/blob/master/Arinst%20protocol.pdf)
